trait Weapon
type +Weapon = %{ weapon: Weapon }

// Idea: Ranged weapons should do half or a third of the damage in melee range.
trait RangedWeapon extends Weapon
type +RangedWeapon = %{ weapon: RangedWeapon }

object Sword extends Weapon
object Shardblade extends Weapon
object Spear extends Weapon
object Shardbow extends RangedWeapon
object Bow extends RangedWeapon

func weapon_strength(Weapon): Int
func weapon_strength(Sword): Int = 7
func weapon_strength(Shardblade): Int = 15
func weapon_strength(Spear): Int = 5
func weapon_strength(Shardbow): Int = 10
func weapon_strength(Bow): Int = 4

func weapon_range(RangedWeapon): Int
func weapon_range(Shardbow): Int = 20
func weapon_range(Bow): Int = 10


func base_stat(entity: +Stats & +Weapon, #attack): Int = weapon_strength(entity.weapon)

func base_stat(entity: +Stats & +Weapon, #range): Int = 0
func base_stat(entity: +Stats & +RangedWeapon, #range): Int = weapon_range(entity.weapon)
