trait Weapon
type +Weapon = %{ weapon: Weapon }

// Idea: Ranged weapons should do half or a third of the damage in melee range.
trait RangedWeapon extends Weapon
type +RangedWeapon = %{ weapon: RangedWeapon }

struct Sword extends Weapon
struct Shardblade extends Weapon
struct Spear extends Weapon
struct Shardbow extends RangedWeapon
struct Bow extends RangedWeapon

func weaponStrength(weapon: Weapon): Int
func weaponStrength(sword: Sword): Int = 7
func weaponStrength(shardblade: Shardblade): Int = 15
func weaponStrength(spear: Spear): Int = 5
func weaponStrength(bow: Shardbow): Int = 10
func weaponStrength(bow: Bow): Int = 4

func weaponRange(weapon: RangedWeapon): Int
func weaponRange(shardbow: Shardbow): Int = 20
func weaponRange(bow: Bow): Int = 10


func baseStat(entity: +Stats & +Weapon, label: #attack): Int = weaponStrength(entity.weapon)

func baseStat(entity: +Stats & +Weapon, label: #range): Int = 0
func baseStat(entity: +Stats & +RangedWeapon, label: #range): Int = weaponRange(entity.weapon)
