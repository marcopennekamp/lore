trait Option[+A]
struct Some[open +A] extends Option[A] { value: A }
struct None extends Option[Nothing]

function toString(option: Option[A]): String where A
function toString(some: Some[A]): String where A = 'Some(${some.value})'
function toString(none: None): String = 'None'


trait AerialPhenomenon
struct Bird extends AerialPhenomenon
struct Plane extends AerialPhenomenon
struct Dragon extends AerialPhenomenon

function toString(some: Some[Bird]): String = 'It\'s just a bird.'
function toString(some: Some[Plane]): String = 'My gosh, the pollution up there!'
function toString(some: Some[Dragon]): String = 'Oh shit, it\'s a dragon!'
function toString(some: Some[[Dragon]]): String = 'They\'re everywhere!'


function test(): [String] = {
  let none = None()
  let string = Some('Hello, world!')
  let list = Some([1, 2, 3])
  let aerials = [Some(Bird()), Some(Plane()), Some(Dragon())]
  let dragons = Some { value = [Dragon(), Dragon(), Dragon()] }
  [toString(none), toString(string), toString(list), toString(aerials), toString(dragons)]
}
