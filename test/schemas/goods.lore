struct Box[+A](content: A)

trait Price
struct HighPrice() extends Price
struct MediumPrice() extends Price
struct LowPrice() extends Price

trait Metal[+P <: Price]
struct Gold() extends Metal[HighPrice]
struct Silver() extends Metal[MediumPrice]
struct Iron() extends Metal[LowPrice]

func price(Box[Metal[Price]]): Real = 0
func price(Box[Metal[HighPrice]]): Real = 48.5
func price(Box[Metal[MediumPrice]]): Real = 17.2
func price(Box[Metal[LowPrice]]): Real = 1.6


func test(): [Real] = do
  let boxes = [
    Box(Gold()),
    Box(Silver()),
    Box(Iron()),
  ]
  boxes |> map(price)
end
