trait Crate[+A]
function extract(crate: Crate[A]): A where A

struct IntCrate extends Crate[Int] { value: Int }
function extract(crate: IntCrate): Int = crate.value

struct ListCrate[+A] extends Crate[[A]] { list: [A] }
// TODO (schemas): `extract` isn't defined for e.g. ListCrate[String], is it? The totality constraint should definitely
//                 catch this error.
function extract(crate: ListCrate[Int]): [Int] = crate.list

struct TobyCrate extends Crate[String]
function extract(crate: TobyCrate): String = 'I am a crate and my name is Toby!'


function test(): [String] = [
  toString(extract(IntCrate(5))),
  toString(extract(ListCrate([1, 2, 3]))),
  extract(TobyCrate())
]
