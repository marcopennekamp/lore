module language.numbers.pow

// TODO (specs): Maybe this should be moved to Pyramid, alongside offering a performant `pow` function.

func pow(x: Real, exp: Int): Real = do
  let mut e = exp
  let mut result = 1.0
  while e > 0
    result *= x
    e -= 1
  end
  result
end

@root
module language.numbers do
  use lore.number.floor
  use lore.test._

  spec 'pow: `pow` results in the expected values' do
    pow(0.5, 0) should_eq 1.0
    pow(0.5, 2) should_eq 0.25
    pow(2.0, 4) should_eq 16.0
    pow(3.0, 2) should_eq 9.0
    pow(0.0, 5) should_eq 0.0
    pow(pow(2.0, 2), 2) should_eq 16.0
    pow(pow(2.0, floor(pow(2.0, 2))), 2) should_eq 256.0
  end
end
