type Status = #ok | #error

function read1(): { status: Status, result: String } = %{ status: #ok, result: 'I am a result!' }
function read2(): { status: Status, result: String } = %{ status: #error, result: '' }
function read3(): { status: Status, result: String } = %{ status: #ok, result: 'I am another result!' }

function test(): [String] = {
  let entries = [read1(), read2(), read3()]
  let successes = filter(entries, entry => entry.status == #ok)
  map(successes, entry => entry.result)
}
