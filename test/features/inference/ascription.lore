use lore.core.to_string
use lore.Option
use lore.Option.Some

trait Animal
struct Fox() extends Animal
struct Mouse() extends Animal

module lore.core do
  func to_string(Fox): String = 'fox'
  func to_string(Mouse): String = 'mouse'
end


func test(): String = do
  let stringify = (option => to_string(option)) :: Option[Animal] => String

  // The `option` should have the type `Option[Animal]` so that it can be reassigned with `Some(Mouse())`. Without the
  // type ascription, `option`'s type would be `Option[Fox]`.
  let mut option = Option.some(Fox() :: Animal)
  option = Some(Mouse())
  stringify(option)
end
